<!-- File: pages/index.vue -->
<template>
  <div class="relative overflow-hidden">
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <!-- åŠ¨æ€æ¸å˜èƒŒæ™¯ -->
      <div class="absolute -top-40 -right-40 w-80 h-80 rounded-full bg-gradient-to-br from-primary-400/20 to-blue-400/20 blur-3xl animate-pulse"></div>
      <div class="absolute -bottom-40 -left-40 w-80 h-80 rounded-full bg-gradient-to-tr from-purple-400/20 to-pink-400/20 blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
      <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-gradient-to-r from-green-400/10 to-cyan-400/10 blur-3xl animate-pulse" style="animation-delay: 4s;"></div>
    </div>

    <!-- Hero åŒºåŸŸ -->
    <section class="relative min-h-[80vh] flex items-center justify-center">
      <!-- èƒŒæ™¯ç½‘æ ¼ -->
      <div class="absolute inset-0 bg-grid-pattern opacity-5 dark:opacity-10"></div>
      
      <div class="relative z-10 text-center px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto">
        <!-- ä¸»æ ‡é¢˜åŒºåŸŸ -->
        <div class="space-y-8 animate-fade-in-up">
          <!-- Badge -->
          <div class="inline-flex items-center px-4 py-2 rounded-full bg-white/10 dark:bg-gray-800/10 backdrop-blur-md border border-white/20 dark:border-gray-700/20">
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">ğŸš€ ç°ä»£åŒ– STEM å­¦ä¹ å¹³å°</span>
          </div>

          <!-- ä¸»æ ‡é¢˜ -->
          <h1 class="text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-gray-900 via-primary-600 to-purple-600 dark:from-white dark:via-primary-400 dark:to-purple-400 leading-tight">
            æ¢ç´¢ç§‘å­¦
            <br>
            <span class="text-4xl md:text-6xl">æ— é™å¯èƒ½</span>
          </h1>

          <!-- å‰¯æ ‡é¢˜ -->
          <p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 max-w-4xl mx-auto leading-relaxed">
            ç³»ç»ŸåŒ–çš„ç§‘å­¦ã€æŠ€æœ¯ã€å·¥ç¨‹å’Œæ•°å­¦å­¦ä¹ èµ„æº
            <br>
            <span class="text-lg text-gray-500 dark:text-gray-400">ä¸ºå­¦ç”Ÿå’Œæ•™è‚²å·¥ä½œè€…æä¾›é«˜è´¨é‡çš„ STEM æ•™è‚²å†…å®¹</span>
          </p>

          <!-- CTA æŒ‰é’® -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
            <UButton 
              size="xl" 
              to="/physics" 
              icon="i-heroicons-rocket-launch"
              class="transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800"
            >
              å¼€å§‹å­¦ä¹ ä¹‹æ—…
            </UButton>
            <UButton 
              size="xl" 
              color="white" 
              variant="solid" 
              icon="i-heroicons-magnifying-glass" 
              @click="openSearch"
              class="transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl bg-white/10 dark:bg-gray-800/10 backdrop-blur-md border border-white/20 dark:border-gray-700/20 text-gray-700 dark:text-gray-300 hover:bg-white/20 dark:hover:bg-gray-800/20"
            >
              æ¢ç´¢å†…å®¹
            </UButton>
          </div>
        </div>

        <!-- ç»Ÿè®¡æ•°æ® -->
        <div class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 animate-fade-in-up" style="animation-delay: 0.5s;">
          <div v-for="stat in stats" :key="stat.label" class="text-center group">
            <div class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-300">
              {{ stat.value }}
            </div>
            <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">{{ stat.label }}</div>
          </div>
        </div>
      </div>
    </section>

    <!-- å­¦ç§‘å…¥å£å¡ç‰‡ -->
    <section class="relative py-20 px-4 sm:px-6 lg:px-8">
      <div class="max-w-7xl mx-auto">
        <!-- åŒºåŸŸæ ‡é¢˜ -->
        <div class="text-center mb-16 animate-fade-in-up">
          <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6">
            å­¦ç§‘<span class="text-primary-600 dark:text-primary-400">å¯¼èˆª</span>
          </h2>
          <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
            é€‰æ‹©æ‚¨æ„Ÿå…´è¶£çš„å­¦ç§‘é¢†åŸŸï¼Œå¼€å§‹æ‚¨çš„å­¦ä¹ æ¢ç´¢
          </p>
        </div>

        <!-- å­¦ç§‘å¡ç‰‡ç½‘æ ¼ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <NuxtLink
            v-for="(subject, index) in subjects"
            :key="subject.id"
            :to="`/${subject.id}`"
            class="group relative overflow-hidden rounded-3xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/20 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-500 hover:scale-105 hover:shadow-2xl animate-fade-in-up"
            :style="{ animationDelay: `${index * 0.1}s` }"
          >
            <!-- èƒŒæ™¯è£…é¥° -->
            <div class="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-10 transition-opacity duration-500"
                 :class="subject.gradient"></div>
            
            <!-- å¡ç‰‡å†…å®¹ -->
            <div class="relative p-8 text-center">
              <!-- å›¾æ ‡å®¹å™¨ -->
              <div class="relative mb-6">
                <div :class="[
                  'w-20 h-20 mx-auto rounded-2xl flex items-center justify-center transition-all duration-500 group-hover:scale-110 group-hover:rotate-3',
                  subject.bgColor
                ]">
                  <UIcon :name="subject.icon" class="w-10 h-10" :class="subject.iconColor" />
                </div>
                <!-- å…‰ç¯æ•ˆæœ -->
                <div class="absolute inset-0 w-20 h-20 mx-auto rounded-2xl opacity-0 group-hover:opacity-20 transition-opacity duration-500 animate-ping"
                     :class="subject.bgColor"></div>
              </div>

              <!-- æ–‡å­—å†…å®¹ -->
              <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-300">
                {{ subject.name }}
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed">
                {{ subject.description }}
              </p>

              <!-- è¿›å…¥æŒ‰é’® -->
              <div class="flex items-center justify-center text-primary-600 dark:text-primary-400 font-medium text-sm group-hover:text-primary-700 dark:group-hover:text-primary-300 transition-colors duration-300">
                <span>æ¢ç´¢å­¦ä¹ </span>
                <UIcon name="i-heroicons-arrow-right" class="w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform duration-300" />
              </div>
            </div>

            <!-- æ•°é‡å¾½ç«  -->
            <div class="absolute top-4 right-4 bg-white/20 dark:bg-gray-800/20 backdrop-blur-md rounded-full px-3 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 border border-white/30 dark:border-gray-700/30">
              {{ subject.count }}+ å†…å®¹
            </div>
          </NuxtLink>
        </div>
      </div>
    </section>

    <!-- ç‰¹è‰²åŠŸèƒ½å±•ç¤º -->
    <section class="relative py-20 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- åŒºåŸŸæ ‡é¢˜ -->
        <div class="text-center mb-16 animate-fade-in-up">
          <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6">
            å¹³å°<span class="text-primary-600 dark:text-primary-400">ç‰¹è‰²</span>
          </h2>
          <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
            ç°ä»£åŒ–çš„å­¦ä¹ ä½“éªŒï¼ŒåŠ©åŠ›æ‚¨çš„çŸ¥è¯†æ¢ç´¢ä¹‹æ—…
          </p>
        </div>

        <!-- ç‰¹è‰²åŠŸèƒ½ç½‘æ ¼ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div 
            v-for="(feature, index) in features" 
            :key="feature.title"
            class="group relative p-8 rounded-2xl bg-white/60 dark:bg-gray-800/60 backdrop-blur-md border border-white/30 dark:border-gray-700/30 hover:shadow-xl transition-all duration-500 hover:scale-105 animate-fade-in-up"
            :style="{ animationDelay: `${index * 0.2}s` }"
          >
            <!-- èƒŒæ™¯è£…é¥° -->
            <div class="absolute inset-0 bg-gradient-to-br from-primary-50/50 to-transparent dark:from-primary-900/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            
            <div class="relative">
              <!-- å›¾æ ‡ -->
              <div :class="[
                'w-16 h-16 rounded-xl flex items-center justify-center mb-6 transition-all duration-500 group-hover:scale-110',
                feature.bgColor
              ]">
                <UIcon :name="feature.icon" class="w-8 h-8" :class="feature.iconColor" />
              </div>

              <!-- å†…å®¹ -->
              <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-300">
                {{ feature.title }}
              </h3>
              <p class="text-gray-600 dark:text-gray-400 leading-relaxed">
                {{ feature.description }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- æœ€æ–°å†…å®¹ -->
    <section class="relative py-20 px-4 sm:px-6 lg:px-8">
      <div class="max-w-7xl mx-auto">
        <!-- åŒºåŸŸæ ‡é¢˜ -->
        <div class="flex items-center justify-between mb-12 animate-fade-in-up">
          <div>
            <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
              æœ€æ–°<span class="text-primary-600 dark:text-primary-400">å†…å®¹</span>
            </h2>
            <p class="text-xl text-gray-600 dark:text-gray-400">
              æ¢ç´¢æœ€æ–°æ·»åŠ çš„å­¦ä¹ èµ„æº
            </p>
          </div>
          <UButton 
            color="gray" 
            variant="outline" 
            icon="i-heroicons-arrow-right" 
            trailing
            class="hidden sm:flex hover:scale-105 transition-transform duration-300"
          >
            æŸ¥çœ‹å…¨éƒ¨
          </UButton>
        </div>

        <!-- æœ€æ–°å†…å®¹ç½‘æ ¼ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <ContentList :query="recentQuery" v-slot="{ list }">
            <article
              v-for="(article, index) in list"
              :key="article._path"
              class="group relative overflow-hidden rounded-2xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/20 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-500 hover:scale-105 hover:shadow-xl animate-fade-in-up"
              :style="{ animationDelay: `${index * 0.1}s` }"
            >
              <!-- èƒŒæ™¯è£…é¥° -->
              <div class="absolute inset-0 bg-gradient-to-br from-primary-50/30 to-transparent dark:from-primary-900/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
              
              <div class="relative p-6">
                <!-- å…ƒä¿¡æ¯ -->
                <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-3">
                  <span class="px-2 py-1 rounded-lg bg-white/50 dark:bg-gray-700/50 font-medium">
                    {{ getSubjectName(article._path) }}
                  </span>
                  <span>Â·</span>
                  <span>{{ formatDate(article.createdAt) }}</span>
                </div>

                <!-- æ ‡é¢˜ -->
                <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-3 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-300 line-clamp-2">
                  <NuxtLink :to="article._path">
                    {{ article.title }}
                  </NuxtLink>
                </h3>

                <!-- æè¿° -->
                <p class="text-gray-600 dark:text-gray-400 line-clamp-3 mb-4 leading-relaxed">
                  {{ article.description }}
                </p>

                <!-- åº•éƒ¨ä¿¡æ¯ -->
                <div class="flex items-center justify-between">
                  <span
                    v-if="article.difficulty"
                    class="px-3 py-1 text-xs rounded-full font-medium"
                    :class="{
                      'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400': article.difficulty === 'beginner',
                      'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400': article.difficulty === 'intermediate',
                      'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400': article.difficulty === 'advanced'
                    }"
                  >
                    {{ difficultyLabels[article.difficulty] }}
                  </span>
                  
                  <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                    <UIcon name="i-heroicons-clock" class="w-4 h-4 mr-1" />
                    <span>{{ article.readingTime || '5 åˆ†é’Ÿ' }}</span>
                  </div>
                </div>

                <!-- é˜…è¯»æŒ‰é’® -->
                <NuxtLink 
                  :to="article._path"
                  class="absolute inset-0 z-10"
                  aria-label="é˜…è¯»æ–‡ç« "
                />
              </div>
            </article>
          </ContentList>
        </div>

        <!-- ç§»åŠ¨ç«¯æŸ¥çœ‹å…¨éƒ¨æŒ‰é’® -->
        <div class="text-center mt-12 sm:hidden">
          <UButton 
            color="gray" 
            variant="outline" 
            icon="i-heroicons-arrow-right" 
            trailing
            class="hover:scale-105 transition-transform duration-300"
          >
            æŸ¥çœ‹å…¨éƒ¨å†…å®¹
          </UButton>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
// æœç´¢ç»„ä»¶
const isSearchOpen = ref(false)
const openSearch = () => {
  isSearchOpen.value = true
}

// ç»Ÿè®¡æ•°æ®
const stats = [
  { value: '4+', label: 'å­¦ç§‘é¢†åŸŸ' },
  { value: '50+', label: 'å­¦ä¹ å†…å®¹' },
  { value: '1000+', label: 'çŸ¥è¯†ç‚¹' },
  { value: '24/7', label: 'åœ¨çº¿å­¦ä¹ ' }
]

// å­¦ç§‘é…ç½®
const subjects = [
  {
    id: 'physics',
    name: 'ç‰©ç†å­¦',
    icon: 'i-heroicons-bolt',
    description: 'æ¢ç´¢ç‰©è´¨è¿åŠ¨è§„å¾‹å’Œè‡ªç„¶ç°è±¡çš„æœ¬è´¨ï¼Œä»ç»å…¸åŠ›å­¦åˆ°é‡å­ç‰©ç†',
    bgColor: 'bg-blue-100 dark:bg-blue-900/30',
    iconColor: 'text-blue-600 dark:text-blue-400',
    gradient: 'from-blue-400 to-cyan-400',
    count: 25
  },
  {
    id: 'chemistry',
    name: 'åŒ–å­¦',
    icon: 'i-heroicons-beaker',
    description: 'ç ”ç©¶ç‰©è´¨çš„ç»„æˆã€æ€§è´¨å’Œå˜åŒ–è§„å¾‹ï¼Œæ­ç¤ºåˆ†å­ä¸–ç•Œçš„å¥¥ç§˜',
    bgColor: 'bg-green-100 dark:bg-green-900/30',
    iconColor: 'text-green-600 dark:text-green-400',
    gradient: 'from-green-400 to-emerald-400',
    count: 18
  },
  {
    id: 'biology',
    name: 'ç”Ÿç‰©å­¦',
    icon: 'i-heroicons-heart',
    description: 'æ¢ç´¢ç”Ÿå‘½çš„å¥¥ç§˜å’Œç”Ÿç‰©ä¸–ç•Œçš„å¤šæ ·æ€§ï¼Œä»ç»†èƒåˆ°ç”Ÿæ€ç³»ç»Ÿ',
    bgColor: 'bg-purple-100 dark:bg-purple-900/30',
    iconColor: 'text-purple-600 dark:text-purple-400',
    gradient: 'from-purple-400 to-pink-400',
    count: 22
  },
  {
    id: 'mathematics',
    name: 'æ•°å­¦',
    icon: 'i-heroicons-calculator',
    description: 'é€»è¾‘æ¨ç†å’ŒæŠ½è±¡æ€ç»´çš„åŸºç¡€å­¦ç§‘ï¼Œæ•°å­—å’Œå…¬å¼çš„ç¾å¦™ä¸–ç•Œ',
    bgColor: 'bg-orange-100 dark:bg-orange-900/30',
    iconColor: 'text-orange-600 dark:text-orange-400',
    gradient: 'from-orange-400 to-red-400',
    count: 30
  }
]

// ç‰¹è‰²åŠŸèƒ½
const features = [
  {
    title: 'ç³»ç»ŸåŒ–å†…å®¹',
    description: 'æ¸…æ™°çš„çŸ¥è¯†ä½“ç³»ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œå¾ªåºæ¸è¿›çš„å­¦ä¹ è·¯å¾„è®©æ‚¨è½»æ¾æŒæ¡å¤æ‚æ¦‚å¿µ',
    icon: 'i-heroicons-academic-cap',
    bgColor: 'bg-primary-100 dark:bg-primary-900/30',
    iconColor: 'text-primary-600 dark:text-primary-400'
  },
  {
    title: 'äº’åŠ¨ä½“éªŒ',
    description: 'æ”¯æŒæ•°å­¦å…¬å¼ã€ä»£ç é«˜äº®ã€å¯è§†åŒ–å›¾è¡¨ç­‰ä¸°å¯Œçš„å†…å®¹å±•ç¤ºï¼Œè®©å­¦ä¹ æ›´åŠ ç”ŸåŠ¨æœ‰è¶£',
    icon: 'i-heroicons-sparkles',
    bgColor: 'bg-purple-100 dark:bg-purple-900/30',
    iconColor: 'text-purple-600 dark:text-purple-400'
  },
  {
    title: 'éšæ—¶éšåœ°',
    description: 'å®Œç¾é€‚é…å„ç§è®¾å¤‡çš„å“åº”å¼è®¾è®¡ï¼Œè®©æ‚¨åœ¨ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹éƒ½èƒ½äº«å—å­¦ä¹ çš„ä¹è¶£',
    icon: 'i-heroicons-device-phone-mobile',
    bgColor: 'bg-green-100 dark:bg-green-900/30',
    iconColor: 'text-green-600 dark:text-green-400'
  }
]

// éš¾åº¦æ ‡ç­¾
const difficultyLabels: Record<string, string> = {
  beginner: 'åˆçº§',
  intermediate: 'ä¸­çº§',
  advanced: 'é«˜çº§'
}

// æœ€æ–°å†…å®¹æŸ¥è¯¢
const recentQuery = {
  path: '/',
  where: [{ _path: { $ne: '/index' } }],
  limit: 6,
  sort: [{ createdAt: -1 }]
}

// è·å–å­¦ç§‘åç§°
const getSubjectName = (path: string) => {
  const subject = path.split('/')[1]
  return subjects.find(s => s.id === subject)?.name || subject
}

// æ ¼å¼åŒ–æ—¥æœŸ
const formatDate = (date: string) => {
  if (!date) return 'æœ€è¿‘æ›´æ–°'
  const d = new Date(date)
  return d.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })
}
</script>

<style scoped>
/* åŠ¨ç”»å®šä¹‰ */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.6s ease-out forwards;
  opacity: 0;
}

/* èƒŒæ™¯ç½‘æ ¼å›¾æ¡ˆ */
.bg-grid-pattern {
  background-image: 
    linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
  background-size: 20px 20px;
}

.dark .bg-grid-pattern {
  background-image: 
    linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
}

/* æ–‡æœ¬è£å‰ª */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* æ¯›ç»ç’ƒæ•ˆæœä¼˜åŒ– */
.backdrop-blur-md {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* æ¸å˜æ–‡å­— */
.bg-clip-text {
  -webkit-background-clip: text;
  background-clip: text;
}

/* æ‚¬åœæ•ˆæœä¼˜åŒ– */
.group:hover .animate-ping {
  animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* å“åº”å¼ä¼˜åŒ– */
@media (max-width: 640px) {
  .text-5xl {
    font-size: 2.5rem;
  }
  
  .text-7xl {
    font-size: 3.5rem;
  }
}

/* æ€§èƒ½ä¼˜åŒ– */
.transform {
  transform: translateZ(0);
  will-change: transform;
}
</style>